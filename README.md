# Evaluation System for Search Engines
- The system evaluates and compare document retrieval methods such as Query Likelihood, BM25, and DPR using Normalized Discounted Cummulative Gain, F-measure, Average Precision, etc.
# Analysis Question

1. Table

| query   | QL     | BM25   | QL - BM25 | DPR    | QL - DPR |
| ------- | ------ | ------ | --------- | ------ | -------- |
| 23849   | 0.0151 | 0.0186 | 23.18%    | 0.2391 | 1483.44% |
| 42255   | 0.1987 | 0.2625 | 32.11%    | 0.4411 | 121.99%  |
| 47210   | 0.1997 | 0.2021 | 1.20%     | 0.3692 | 84.88%   |
| 67316   | 0.008  | 0.0151 | 88.75%    | 0.0853 | 966.25%  |
| 118440  | 0.0036 | 0.0044 | 22.22%    | 0.008  | 122.22%  |
| 121171  | 0.6916 | 0.6956 | 0.58%     | 0.2195 | -68.26%  |
| 135802  | 0.1164 | 0.1176 | 1.03%     | 0.0546 | -53.09%  |
| 141630  | 0.3959 | 0.469  | 18.46%    | 0.4309 | 8.84%    |
| 156498  | 0.0564 | 0.0701 | 24.29%    | 0.1348 | 139.01%  |
| 169208  | 0.1319 | 0.1075 | -18.50%   | 0.1028 | -22.06%  |
| 174463  | 0.0041 | 0.0301 | 634.15%   | 0.1838 | 4382.93% |
| 258062  | 0.0314 | 0.0317 | 0.96%     | 0.164  | 422.29%  |
| 324585  | 0.0449 | 0.0369 | -17.82%   | 0.3791 | 744.32%  |
| 330975  | 0.1675 | 0.2357 | 40.72%    | 0.5441 | 224.84%  |
| 332593  | 0.2522 | 0.231  | -8.41%    | 0.2221 | -11.93%  |
| 336901  | 0.0634 | 0.0634 | 0.00%     | 0.1708 | 169.40%  |
| 390360  | 0.3275 | 0.2741 | -16.31%   | 0.2375 | -27.48%  |
| 405163  | 0.0787 | 0.0735 | -6.61%    | 0.0013 | -98.35%  |
| 555530  | 0.0084 | 0.0134 | 59.52%    | 0.2544 | 2928.57% |
| 583468  | 0.6706 | 0.7267 | 8.37%     | 0.7084 | 5.64%    |
| 640502  | 0.1199 | 0.0878 | -26.77%   | 0.188  | 56.80%   |
| 673670  | 0.0324 | 0.0416 | 28.40%    | 0.0009 | -97.22%  |
| 701453  | 0.5663 | 0.5531 | -2.33%    | 0.316  | -44.20%  |
| 730539  | 0.2034 | 0.1356 | -33.33%   | 0.1628 | -19.96%  |
| 768208  | 0.2353 | 0.2433 | 3.40%     | 0.0623 | -73.52%  |
| 877809  | 0.1914 | 0.2516 | 31.45%    | 0.2097 | 9.56%    |
| 911232  | 0.2038 | 0.1542 | -24.34%   | 0.1592 | -21.88%  |
| 914916  | 0.3638 | 0.286  | -21.39%   | 0.4061 | 11.63%   |
| 938400  | 0.166  | 0.1043 | -37.17%   | 0.3848 | 131.81%  |
| 940547  | 0.0868 | 0.0892 | 2.76%     | 0.3152 | 263.13%  |
| 940548  | 0      | 0      | 0.00%     | 0      | 0.00%    |
| 997622  | 0.0748 | 0.0524 | -29.95%   | 0.1313 | 75.53%   |
| 1030303 | 0.5014 | 0.5014 | 0.00%     | 0.1939 | -61.33%  |
| 1037496 | 0.4259 | 0.3181 | -25.31%   | 0.2945 | -30.85%  |
| 1043135 | 0.1128 | 0.1031 | -8.60%    | 0.1281 | 13.56%   |
| 1049519 | 0      | 0      | 0.00%     | 0      | 0.00%    |
| 1051399 | 0.0201 | 0.0113 | -43.78%   | 0.1348 | 570.65%  |
| 1056416 | 0      | 0      | 0.00%     | 0      | 0.00%    |
| 1064670 | 0.2233 | 0.2312 | 3.54%     | 0.1521 | -31.89%  |
| 1071750 | 0.2587 | 0.2685 | 3.79%     | 0.2944 | 13.80%   |
| 1103153 | 0      | 0      | 0.00%     | 0      | 0.00%    |
| 1105792 | 0.3999 | 0.384  | -3.98%    | 0.1988 | -50.29%  |
| 1106979 | 0.634  | 0.5034 | -20.60%   | 0.5401 | -14.81%  |
| 1108651 | 0.0547 | 0.025  | -54.30%   | 0.2464 | 350.46%  |
| 1108729 | 0      | 0      | 0.00%     | 0      | 0.00%    |
| 1109707 | 0.1502 | 0.175  | 16.51%    | 0.1376 | -8.39%   |
| 1110678 | 0.4205 | 0.3262 | -22.43%   | 0.0201 | -95.22%  |
| 1113256 | 0.4953 | 0.4969 | 0.32%     | 0.4651 | -6.10%   |
| 1115210 | 0.0915 | 0.0887 | -3.06%    | 0.0651 | -28.85%  |
| 1116380 | 0.0396 | 0.0111 | -71.97%   | 0.0587 | 48.23%   |
| 1119543 | 0      | 0      | 0.00%     | 0      | 0.00%    |
| 1121353 | 0.2557 | 0.2349 | -8.13%    | 0.1002 | -60.81%  |
| 1122767 | 0.346  | 0.3235 | -6.50%    | 0.2052 | -40.69%  |
| 1127540 | 0.2693 | 0.2764 | 2.64%     | 0.1705 | -36.69%  |
| 1131069 | 0.0288 | 0.0856 | 197.22%   | 0.2143 | 644.10%  |
| 1132532 | 0.1666 | 0.1044 | -37.33%   | 0.2442 | 46.58%   |
| 1133579 | 0.6677 | 0.6666 | -0.16%    | 0.753  | 12.78%   |
| 1136043 | 0.0976 | 0.1569 | 60.76%    | 0.3695 | 278.59%  |
| 1136047 | 0.0666 | 0.0464 | -30.33%   | 0.0623 | -6.46%   |
| 1136769 | 0      | 0      | 0.00%     | 0      | 0.00%    |
| 1136962 | 0.4689 | 0.4879 | 4.05%     | 0.4199 | -10.45%  |
| all     | 0.1952 | 0.1886 | -3.38%    | 0.2091 | 7.12%    |

2. The table shows that in some documents, the result generated by the BM25 model and DPR is far more accurate than the result generated by QL. However, in some documents, the opposite happens. They offset each other, so looking generally, the difference in result between the models is insignificant

3. MAP is a way to summarize the ranking with only a single number. It considers both the precision of the returned documents at each rank and the order in which the relevant documents are presented. The question is hard to answer because the denominator of an AP is the number of relevant document retrieved. With no document retrieved for a query, this denominator is 0. We could consider the MAP for the query to be 0, however, if there is no relevant document in the ground truth, this is perfect retrieval. Therefore, I think the solution should be based on if there is actually any relevant document, if no, then attribute the no-retrieval query's AP to 1, and 0 vice versa.
